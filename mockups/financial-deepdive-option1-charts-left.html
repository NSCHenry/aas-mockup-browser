<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AAS - Financial Deep Dive - Charts Left</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #1a1d2e;
      color: #e8eaed;
      padding: 20px;
      min-width: 1024px;
    }
    .dashboard-header { margin-bottom: 30px; }
    h1 { font-size: 28px; margin-bottom: 8px; }
    .subtitle { color: #9aa0a6; font-size: 14px; }
    .layout { display: grid; grid-template-columns: 60% 40%; gap: 20px; max-width: 1800px; }
    .tile {
      background: linear-gradient(145deg, #252940 0%, #2d3348 100%);
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      margin-bottom: 20px;
    }
    .tile-title { font-size: 16px; margin-bottom: 20px; color: #e8eaed; font-weight: 600; }
    .chart-container { position: relative; height: 300px; margin-top: 16px; }
    .metric-card {
      padding: 20px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 8px;
      margin-bottom: 16px;
    }
    .metric-label { font-size: 12px; color: #9aa0a6; text-transform: uppercase; margin-bottom: 8px; }
    .metric-value { font-size: 32px; font-weight: 700; }
    .value-green { color: #4ade80; }
    .value-yellow { color: #fbbf24; }
    .value-red { color: #ff6b6b; }
  </style>
</head>
<body>
  <div class="dashboard-header">
    <h1>Financial Deep Dive - Charts Left Layout</h1>
    <div class="subtitle">AAS Dashboard • November 2025 • $28.0M TTM Revenue</div>
  </div>
  <div class="layout">
    <div class="charts-column">
      <div class="tile">
        <div class="tile-title">Revenue by Contract Type</div>
        <div class="chart-container">
          <canvas id="revenue-type"></canvas>
        </div>
      </div>
      <div class="tile">
        <div class="tile-title">Revenue by Geography (Monthly Trend)</div>
        <div class="chart-container">
          <canvas id="revenue-geo"></canvas>
        </div>
      </div>
      <div class="tile">
        <div class="tile-title">Gross Margin by ASC (Top 15)</div>
        <div class="chart-container">
          <canvas id="margin-asc"></canvas>
        </div>
      </div>
      <div class="tile">
        <div class="tile-title">P&L Trending (12 Months)</div>
        <div class="chart-container">
          <canvas id="pl-trend"></canvas>
        </div>
      </div>
    </div>
    <div class="metrics-column">
      <div class="tile">
        <div class="tile-title">Key Financial Metrics</div>
        <div class="metric-card">
          <div class="metric-label">Total Revenue (TTM)</div>
          <div class="metric-value value-green">$28.0M</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Gross Profit</div>
          <div class="metric-value value-green">$4.6M</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Gross Margin %</div>
          <div class="metric-value">16.5%</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">EBITDA</div>
          <div class="metric-value value-green">$4.3M</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">EBITDA Margin %</div>
          <div class="metric-value value-yellow">15.2%</div>
        </div>
      </div>
      <div class="tile">
        <div class="tile-title">Revenue Mix Breakdown</div>
        <div class="metric-card">
          <div class="metric-label">True-Up Contracts</div>
          <div class="metric-value">59%</div>
          <div style="font-size: 13px; color: #9aa0a6; margin-top: 4px;">$16.6M</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Fee-for-Service</div>
          <div class="metric-value">22%</div>
          <div style="font-size: 13px; color: #9aa0a6; margin-top: 4px;">$6.2M</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Pure Billing</div>
          <div class="metric-value">14%</div>
          <div style="font-size: 13px; color: #9aa0a6; margin-top: 4px;">$3.9M</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Labor Floor</div>
          <div class="metric-value">5%</div>
          <div style="font-size: 13px; color: #9aa0a6; margin-top: 4px;">$1.4M</div>
        </div>
      </div>
      <div class="tile">
        <div class="tile-title">Collections Performance</div>
        <div class="metric-card">
          <div class="metric-label">Above Floor Collections</div>
          <div class="metric-value value-green">$2.2M</div>
        </div>
        <div class="metric-card">
          <div class="metric-label">Subsidy Reliance (Avg)</div>
          <div class="metric-value value-green">18.2%</div>
        </div>
      </div>
    </div>
  </div>
  <script>
    const chartDefaults = {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { labels: { color: '#e8eaed', font: { family: '-apple-system' } } },
        tooltip: { backgroundColor: 'rgba(37, 41, 64, 0.95)', titleColor: '#e8eaed', bodyColor: '#9aa0a6' }
      }
    };

    // Revenue by Type
    new Chart(document.getElementById('revenue-type'), {
      type: 'bar',
      data: {
        labels: ['True-Up', 'Fee-for-Service', 'Pure Billing', 'Labor Floor'],
        datasets: [{
          label: 'Revenue ($M)',
          data: [16.6, 6.2, 3.9, 1.4],
          backgroundColor: ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6']
        }]
      },
      options: {
        ...chartDefaults,
        plugins: { legend: { display: false } },
        scales: {
          x: { grid: { display: false }, ticks: { color: '#9aa0a6' } },
          y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#9aa0a6', callback: v => '$'+v+'M' } }
        }
      }
    });

    // Revenue by Geography
    new Chart(document.getElementById('revenue-geo'), {
      type: 'bar',
      data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov'],
        datasets: [
          { label: 'Michigan', data: [1.0, 1.0, 1.05, 1.1, 1.0, 1.05, 1.1, 1.15, 1.1, 1.2, 1.25], backgroundColor: '#3b82f6' },
          { label: 'Indiana', data: [1.2, 1.25, 1.3, 1.35, 1.3, 1.4, 1.45, 1.5, 1.55, 1.6, 1.65], backgroundColor: '#10b981' }
        ]
      },
      options: {
        ...chartDefaults,
        scales: {
          x: { stacked: true, grid: { display: false }, ticks: { color: '#9aa0a6' } },
          y: { stacked: true, grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#9aa0a6', callback: v => '$'+v+'M' } }
        }
      }
    });

    // Margin by ASC
    new Chart(document.getElementById('margin-asc'), {
      type: 'bar',
      data: {
        labels: ['ASC 1', 'ASC 2', 'ASC 3', 'ASC 4', 'ASC 5', 'ASC 6', 'ASC 7', 'ASC 8', 'ASC 9', 'ASC 10', 'ASC 11', 'ASC 12', 'ASC 13', 'ASC 14', 'ASC 15'],
        datasets: [{
          data: [22.1, 21.5, 20.8, 19.2, 18.9, 18.5, 17.8, 16.5, 16.2, 15.8, 14.5, 13.2, 12.1, 10.5, 8.2],
          backgroundColor: ['#10b981','#10b981','#10b981','#4ade80','#4ade80','#4ade80','#4ade80','#3b82f6','#3b82f6','#3b82f6','#fbbf24','#fbbf24','#ff6b6b','#ff6b6b','#ff6b6b']
        }]
      },
      options: {
        ...chartDefaults,
        indexAxis: 'y',
        plugins: { legend: { display: false } },
        scales: {
          x: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#9aa0a6', callback: v => v+'%' } },
          y: { grid: { display: false }, ticks: { color: '#9aa0a6', font: { size: 10 } } }
        }
      }
    });

    // P&L Trend
    new Chart(document.getElementById('pl-trend'), {
      type: 'line',
      data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        datasets: [
          { label: 'Revenue', data: [2.2, 2.25, 2.35, 2.45, 2.3, 2.45, 2.55, 2.65, 2.65, 2.8, 2.9, 3.0], borderColor: '#3b82f6', tension: 0.4, borderWidth: 3 },
          { label: 'Gross Profit', data: [0.36, 0.37, 0.39, 0.40, 0.38, 0.40, 0.42, 0.44, 0.44, 0.46, 0.48, 0.50], borderColor: '#10b981', tension: 0.4, borderWidth: 3 },
          { label: 'EBITDA', data: [0.33, 0.34, 0.36, 0.37, 0.35, 0.37, 0.39, 0.40, 0.40, 0.43, 0.44, 0.46], borderColor: '#f59e0b', tension: 0.4, borderWidth: 3 }
        ]
      },
      options: {
        ...chartDefaults,
        scales: {
          x: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#9aa0a6' } },
          y: { grid: { color: 'rgba(255,255,255,0.05)' }, ticks: { color: '#9aa0a6', callback: v => '$'+v+'M' } }
        }
      }
    });
  </script>
</body>
</html>
